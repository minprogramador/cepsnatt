<!DOCTYPE html>
<html lang="pt-br">

    <head>
        <meta charset="UTF-8">
        <title>Natt - Menu de Consulta</title>


        <script type="text/javascript">
			function consultar()
				{

					document.getElementById('blanket').style.display = 'block';document.getElementById('aguarde').style.display = 'block';

					if(document.getElementById('e_cpf').value!="") {
						//var retorno = validaCPF(document.getElementById('e_cpf'));
						var retorno = dvcpf(document.getElementById('e_cpf'));
						if (retorno == true) {
							document.PostForm1.action = '?res=cpf';
							document.PostForm1.submit();
						} else { alert("CPF Invalido!");}
					}	

					if(document.getElementById('e_cnpj').value!="") {
						var retorno = ValidarCNPJ(document.getElementById('e_cnpj')); 
						if (retorno == true) {
							document.PostForm1.action = '?cnpj=true';  
							document.PostForm1.submit();
						} else { alert("CNPJ Invalido!")}	
					}

					if(document.getElementById('e_telefone').value!="") {
						document.PostForm1.action = '?fone=true';  
						document.PostForm1.submit();
					}

					if(document.getElementById('e_nome').value!="") {
						document.PostForm2.action = '?nome=true';  
						document.PostForm2.submit();
					}

					if(document.getElementById('e_log').value!="") {
						var e = document.getElementById('e_uf');
						var itemSelecionado = e.options[e.selectedIndex].value;
						if ( document.getElementById('e_cidade').value=="") {
							alert("Obrigatorio preencher a Cidade!");
						} else if (itemSelecionado == "") {
							alert("Obrigatorio selecionar o Estado!");	
						} else {
							document.PostForm3.action = '?end=true';
							document.PostForm3.submit();
						}
					}

					if(document.getElementById('e_cep').value!="") {
					//	if ( document.getElementById('e_numero_inicio').value=="") {
					//		alert("Obrigatorio preencher N. Inicio!");
					//	} else if (document.getElementById('e_numero_fim').value=="") {
					//		alert("Obrigatorio preencher N. Fim!");
					//	} else {	
							document.PostForm4.action = '?cep=true';
							document.PostForm4.submit();
					//	}	
					}	
				}

			function consultarBacen()
				{
					if(document.getElementById('e_cpf_bacen').value!="") {
						var retorno = ValidarCPF(document.getElementById('e_cpf_bacen'));
						if (retorno == true) {
							document.PostForm10.action = '?bacen=true';
							document.PostForm10.submit();
						} else { alert("CPF Invalido!");}
					}	

					if(document.getElementById('e_cnpj_bacen').value!="") {
						var retorno = ValidarCNPJ(document.getElementById('e_cnpj_bacen')); 
						if (retorno == true) {
							document.PostForm10.action = '?bacen=true';  
							document.PostForm10.submit();
						} else { alert("CNPJ Invalido!")}	
					}
				}	


			function formatar(mascara, documento)
				{
					var i = documento.value.length;
				  	var saida = mascara.substring(0,1);
				  	var texto = mascara.substring(i)
			  	
			  		if (texto.substring(0,1) != saida) {
            			documento.value += texto.substring(0,1);
  					}
  				}	
  			function Opcao($valor)
				{
					window.location.href='Natt.php?pg='.concat($valor);
				}

			//valida o CNPJ digitado
			function ValidarCNPJ(ObjCnpj)
				{
			        var cnpj = ObjCnpj.value;
			        var valida = new Array(6,5,4,3,2,9,8,7,6,5,4,3,2);
			        var dig1= new Number;
			        var dig2= new Number;

			        exp = /\.|\-|\//g
			        cnpj = cnpj.toString().replace( exp, "" ); 
			        var digito = new Number(eval(cnpj.charAt(12)+cnpj.charAt(13)));

			        for(i = 0; i<valida.length; i++){
			                dig1 += (i>0? (cnpj.charAt(i-1)*valida[i]):0);  
			                dig2 += cnpj.charAt(i)*valida[i];       
			        }
			        dig1 = (((dig1%11)<2)? 0:(11-(dig1%11)));
			        dig2 = (((dig2%11)<2)? 0:(11-(dig2%11)));

			        if(((dig1*10)+dig2) != digito) { 
			            return false;
			        } else { return true; }
			    }
			
			//dvcpf
			//Funcao de digito verificador de CPF
			//Parametros: 
			function dvcpf (Objcpf)
			{
					
					var cpf = Objcpf.value;
			        exp = /\.|\-/g
			        cpf = cpf.toString().replace( exp, "" ); 
			        var vlr=cpf;

			lngSoma = 0;
			intNumero = 0;
			intMais = 0;
			strCampo = vlr.substr( 0, 9 );

			if (vlr.length < 11) { return false; }
			for ( i=1; i<10; i++ )
			{
				strCaracter = strCampo.substr( strCampo.length - i );
				intNumero = parseInt( strCaracter.substr( 0, 1 ) );
				intMais = intNumero * ( i+1 );
				lngSoma += intMais;
			}
			dblDivisao = lngSoma / 11;
			lngInteiro = parseInt( dblDivisao ) * 11;
			intResto = lngSoma - lngInteiro;
			intDig1 = ( intResto == 0 || intResto == 1 ) ? 0 : 11 - intResto;
			strCampo += intDig1;
			lngSoma = 0;
			intNumero = 0;
			intMais = 0;
			for ( i=1; i<11; i++ )
			{
				strCaracter = strCampo.substr( strCampo.length - i );
				intNumero = parseInt( strCaracter.substr( 0, 1 ) );
				intMais = intNumero * ( i+1 );
				lngSoma += intMais;
			}
			dblDivisao = lngSoma / 11;
			lngInteiro = parseInt( dblDivisao ) * 11;
			intResto = lngSoma - lngInteiro;
			intDig2 = ( intResto == 0 || intResto == 1 ) ? 0 : 11 - intResto;
			strCampo += intDig2;
			strConf = intDig1.toString() + intDig2.toString();
			rt = ( strConf == vlr.substr( vlr.length - 2 ) );

			if (! rt ) 
			{
				return false;
			}
			else
			{
				return true;
			}

			} // FIM DVCPF

			//valida o CPF digitado
			function ValidarCPF(Objcpf)
				{
			        var cpf = Objcpf.value;
			        exp = /\.|\-/g
			        cpf = cpf.toString().replace( exp, "" ); 
			        var digitoDigitado = eval(cpf.charAt(9)+cpf.charAt(10));
			        var soma1=0, soma2=0;
			        var vlr =11;

			        for(i=0;i<9;i++){
			                soma1+=eval(cpf.charAt(i)*(vlr-1));
			                soma2+=eval(cpf.charAt(i)*vlr);
			                vlr--;
			        }       
			        soma1 = (((soma1*10)%11)==10 ? 0:((soma1*10)%11));
			        soma2=(((soma2+(2*soma1))*10)%11);

			        var digitoGerado=(soma1*10)+soma2;
			        
			        if(digitoGerado!=digitoDigitado)  { 
			            return false;
			        } else { return true; }        
			}

			//valida cpf 2
			 function validaCPF(Objcpf)
			  {
			 var cpf = Objcpf.value;
  			exp = /\.|\-/g
			cpf = cpf.toString().replace( exp, "" );
			  var numeros, digitos, soma, i, resultado, digitos_iguais;
			    digitos_iguais = 1;
			    if (cpf.length < 11)
			          return false;
			    for (i = 0; i < cpf.length - 1; i++)
			          if (cpf.charAt(i) != cpf.charAt(i + 1))
			                {
			                digitos_iguais = 0;
			                break;
			                }
			    if (!digitos_iguais)
			          {
			          numeros = cpf.substring(0,9);
			          digitos = cpf.substring(9);
			          soma = 0;
			          for (i = 10; i > 1; i--)
			                soma += numeros.charAt(10 - i) * i;
			          resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
			          if (resultado != digitos.charAt(0))
			                return false;
			          numeros = cpf.substring(0,10);
			          soma = 0;
			          for (i = 11; i > 1; i--)
			                soma += numeros.charAt(11 - i) * i;
			          resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
			          if (resultado != digitos.charAt(1))
			                return false;
			          return true;
			          }
			    else
			        return false;
			  }
			
			function enter()
				{
      			if (event.keyCode == 13) {
				  	consultar();
			    }
			}
			
			document.onkeydown=enter;

  		</script>
		<style>
			#blanket,#aguarde {
			    position: fixed;
			    display: none;
			}

			#blanket {
			    left: 0;
			    top: 0;
			    background-color: #f0f0f0;
			    filter: alpha(opacity =         65);
			    height: 100%;
			    width: 100%;
			    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=65)";
			    opacity: 0.65;
			    z-index: 9998;
			}

			#aguarde {
			    width: auto;
			    height: 30px;
			    top: 40%;
			    left: 45%;
			    background: url('http://i.imgur.com/SpJvla7.gif') no-repeat 0 50%;
			    line-height: 30px;
			    font-weight: bold;
			    font-family: Arial, Helvetica, sans-serif;
			    z-index: 9999;
			    padding-left: 27px;
			}
		</style>  		
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,800' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="nx/css/reset.css" />
        <link rel="stylesheet" href="nx/css/novo.css" /> 

    </head>
    <meta http-equiv="pragma" content="no-cache">
        
        <div id="blanket"></div>
        <div id="aguarde"><br>Aguarde...</div>
    	
    	<body class="home">

   			<div class="header">
				<table width="100%" border="0" id="Title">
					<tr id="1">
			        	<td width="50%" align="center"><br/></td>
				    	<td width="50%" align="center"></td>
					</tr>
				</table>
			</div>
			    <aside>
			    <div align="center">
			        <h3 align="center" class=""><b>Selecione o Produto</b></h1>
				        <br>
	       				<div>
	           				<label>
	           						           					<input type="submit" class="btn firebrick" value="ACHEI" onClick="Opcao('achei')" >
	           				</label>
	       				</div>
	       				<br>
	       				
    	   				<br>
	       				<div>	
	           				<label> 
	           						           					<input type="submit" class="btn firebrickativo" value="NATT Bacen" onClick="Opcao('bacen')" />
	           				</label> 
	       				</div>
	       				<br>
	       				<hr>
	       				<div>
	       				<br>	
	           				<label> 
	           						           					
	           				</label> 
	       				</div>
	       		</div>
	       		<div style="margin-top: 180px"></aside>			

		        <article>
	            		<br>
		<div style="margin-bottom: 15px;">	
			<fieldset>
				<legend><b>Consulta por CPF ou CNPJ<b></legend>
				<form name="PostForm10" action="" method="post" enctype="multipart/form-data">	    
					<div class="label_line">
						<label class="label_tri2">
			                <span class="field">CPF:</span>
				            <input type="text" name="e_cpf_bacen" id="e_cpf_bacen" value="" maxlength="14" OnKeyPress="formatar('###.###.###-##', this)" />
				        </label>
			            <label class="label_tri2">
			                <span class="field">CNPJ:</span>
			                <input type="text" name="e_cnpj_bacen" id="e_cnpj_bacen" value="" maxlength="18" OnKeyPress="formatar('##.###.###.####/##', this)" />
			            </label>
			            <label class="label_tri2">
			                <span class="field">DDD + Telefone:</span>
			                <input <input style="background: #eee;" type="text" name="e_telefone" id="e_telefone_bacen" value="" maxlength="13" OnKeyPress="formatar('##-####-#####', this)" readonly="readonly" />
			            </label>
					</div>
				</form>
			</fieldset>	
		</div>	
		<div>
	    	<label>
	        	<input type="button" class="btn blue" value="PESQUISAR" onclick="consultarBacen()" >
	    	</label>
	    </div>
				</article>
	 		</body>

</html>
